Vim using GLOBAL
================

In Vim 6.2 or later, you can use the ‘gtags.vim’ script.

Features
--------

 * You can use most of GLOBAL’s facilities from Vim.
 * Intelligent recognition of the current token and its type.
 * Special characters ‘%’, ‘#’ and input completion are available.

To our regret, the tag stack facility is not available. If you want to use the
facility, please try gtags-cscope.vim. See section Gtags-cscope.

Preparation
-----------

First, do the preparation of global. See section Preparation.

Second, copy ‘gtags.vim’ to your plug-in directory or source it from your vimrc.

    $ cp /usr/local/share/gtags/gtags.vim $HOME/.vim/plugin

Usage
-----

### To go to main, you can say

	:Gtags main

Vim executes global(1), parses the output, lists located tags in quickfix
window and loads the first entry. The quickfix window is like this:

	gozilla/gozilla.c|200| main(int argc, char **argv)
	gtags-cscope/gtags-cscope.c|124| main(int argc, char **argv)
	gtags-parser/asm_scan.c|2056| int main()
	gtags-parser/gctags.c|157| main(int argc, char **argv)
	gtags-parser/php.c|2116| int main()
	gtags/gtags.c|152| main(int argc, char **argv)
	[Quickfix List]

You can go to any entry using quickfix command.

	:cn

go to the next entry.

	:cp

go to the previous entry.

	:ccN

go to the N’th entry.

	:cl

list all entries.

You can see the help of quickfix like this:

	:h quickfix

Suggested map:

	map <C-n> :cn<CR>
	map <C-p> :cp<CR>

### To go to the referenced point of func1, add the `-r` option.

	:Gtags -r func1

### To locate symbols which are not defined in `GTAGS`, try this:

	:Gtags -s lbolt

### To locate strings, try this:

	:Gtags -g int argc

	:Gtags -g "root"

	:Gtags -ge -C               <- locate '-C'

### To get a list of tags in specified files, use the `-f` command.

	:Gtags -f main.c            <- locate tags in main.c

If you are editing ‘main.c’ itself, you can use ‘%’ instead.

	:Gtags -f %                 <- locate tags in main.c

### You can use POSIX regular expressions.

	:Gtags ^put_              <- locate tags starting with 'put_'

	:Gtags -g fseek(.*SEEK_SET) <- locate fseek() using SEEK_SET

### Input completion is available.

In the command line, press CTRL-D after some typing and Vim will show a list of
tag names that start with the string. Press <TAB> and Vim will complete the tag
name.

	:Gtags fu<TAB>

	:Gtags func1                <- 'nc1' is appended by vim

### You can browse files whose path includes specified pattern.

	:Gtags -P /vm/              <- under vm/ directory
	:Gtags -P \.h$              <- all include files
	:Gtags -P init              <- path including 'init'

### You can use all options of global(1) except for `-c -n -p -q -u -v` and all
### long name options. They are sent to global(1) as is. For example:

	:Gtags -gi paTtern        <- matches both 'PATTERN' and 'pattern'

	:Gtags -POi make          <- matches Makefile but not makeit.c

    About the other options, please see global - print locations of given
    symbols.

### The GtagsCursor command brings you to the definition or reference of the
### current token.

If the context of the current token is a definition then it is equivalent to
:Gtags -r current-token; if it is a reference to some definitions then it is
equivalent to :Gtags current-token; else it is equivalent to :Gtags -s
current-token.

	:GtagsCursor

Suggested map:

	map <C-\>^] :GtagsCursor<CR>

Though the mapping of :GtagsCursor to ^] seems suitable, it will bring an
inconvenience in the help screen.

### If you have the hypertext generated by htags(1) then you can display the
### same part of the source code in the mozilla browser. Let’s load mozilla and
### try this:

	:Gozilla

Suggested map:

	map <C-g> :Gozilla<CR>

### If you want to load Vim with all main()s then following command line is
### useful.

	$ vim '+Gtags main'

Gtags-cscope
============

You can also use cscope as a client of GNU GLOBAL. GLOBAL package includes
a command named ’gtags-cscope’ which is a port of cscope, that is, it is cscope
itself except that it use GLOBAL as a search engine instead of cscope’s one.

	$ gtags-cscope

Its function is available from vim editor. Please input like follows in the
command mode.

	:set csprg=gtags-cscope
	:cs add GTAGS

After this, you can use built-in cs find commands in the Vim editor. Though the
deceit is not perfect (cs find d is not implemented), this method might be more
convenient than ‘gtags.vim’ in that you can use the tag stack facility of Vim.
